<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">

    <title>Тестовое задание компании "Новый диск". Задача 1</title>
</head>
<body>
    <div class="container-fluid d-flex flex-column">
        <div class="btn btn-primary mx-auto my-3 data-loading-button">
            Загрузить данные
        </div>

        <form class="search-form d-none">
            <input type="search"
                class="search-form__search-input form-control"
                placeholder="Поиск по всем полям..."
                required>
        </form>

        <div class="table-area mt-2 table-responsive">
            <table class="table table-bordered table-hover mt-1 teachers-table">
                <thead class="thead-light teachers-table__columns-names">
                </thead>

                <tbody class="teachers-table__table-body">
                </tbody>
            </table>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        function build_table_from_json_data(json_data){
            let parsed_data = JSON.parse(JSON.stringify(json_data));
            let teachers = parsed_data.teachers;

            let table_columns_names = Object.keys(teachers[0]);

            let table_columns_elements = table_columns_names.map(function (column_name) {
                let th_element = document.createElement('th');
                th_element.innerText = column_name;

                return th_element;
            });

            let table_head_row = $('.teachers-table__columns-names');
            table_head_row.html(table_columns_elements);

            let table_body = $('.teachers-table__table-body');
            table_body.empty();

            for (teacher of teachers) {
                let table_row = document.createElement('tr');

                for (column_name of table_columns_names) {
                    let table_row_cell = document.createElement('td');
                    table_row_cell.innerText = teacher[column_name];

                    table_row.append(table_row_cell);
                }

                table_body.append(table_row);
            }
        }

        $(".data-loading-button").on('click', () => {
            $.ajax({
                type: 'GET',
                url: 'teachers.json',
                success: function (json_data) {
                    build_table_from_json_data(json_data);
                }
            });
        })
    </script>
</body>
</html>
